{"mappings":";;;;;;;;;;AEAO,SAAS,0CAAU,IAAI,EAAE,GAAG;IACjC;IACA,MAAM,SAAS,CAAC,yBAAyB,EAAE,KAAK,EAAE,EAAE,IAAI,MAAM,CAAC;IAC/D,SAAS,cAAc,QAAQ,mBAAmB,cAAc;IAChE,OAAO,WAAW,2CAAW;AAC/B;AAEO,SAAS;IACd,MAAM,KAAK,SAAS,cAAc;IAClC,IAAI,IAAI,GAAG,cAAc,YAAY;AACvC;;;ADPO,eAAe,0CAAM,KAAK,EAAE,QAAQ;IACzC,IAAI;QACF,MAAM,MAAM,MAAM,CAAA,GAAA,sCAAI,EAAE;YACtB,QAAQ;YACR,KAAK;YACL,MAAM;uBACJ;0BACA;YACF;QACF;QAEA,IAAI,IAAI,KAAK,WAAW,WAAW;YACjC,mCAAmC;YACnC,CAAA,GAAA,yCAAQ,EAAE,WAAW;YACrB,OAAO,WAAW;gBAChB,SAAS,OAAO;YAClB,GAAG;QACL;QACA,QAAQ,IAAI;IACd,EAAE,OAAO,KAAK;QACZ,oCAAoC;QACpC,CAAA,GAAA,yCAAQ,EAAE,SAAS,IAAI,SAAS,KAAK;IACvC;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,MAAM,CAAA,GAAA,sCAAI,EAAE;YACtB,QAAQ;YACR,KAAK;QACP;QACA,IAAI,IAAI,KAAK,WAAW,WAAW,SAAS,OAAO;IACrD,EAAE,OAAO,KAAK;QACZ,CAAA,GAAA,yCAAQ,EAAE,SAAS;IACrB;AACF;;;;;AEnCO,eAAe,0CAAe,IAAI,EAAE,IAAI;IAC7C,IAAI;QACF,MAAM,MACJ,SAAS,aACL,wDACA;QACN,MAAM,MAAM,MAAM,CAAA,GAAA,sCAAI,EAAE;YACtB,QAAQ;iBACR;kBACA;QACF;QACA,IAAI,IAAI,KAAK,WAAW,WACtB,CAAA,GAAA,yCAAQ,EAAE,WAAW,CAAC,EAAE,KAAK,cAAc,qBAAqB,CAAC;IAErE,EAAE,OAAO,KAAK;QACZ,QAAQ,IAAI,IAAI;QAChB,CAAA,GAAA,yCAAQ,EAAE,SAAS,IAAI,SAAS,KAAK;IACvC;AACF;;;ACnBe,kDAAU,SAAS;IAChC,IAAI,MAAM,EAAE,IAAI,OAAO;QAAE,aAAa;IAAM,IAAI,qBAAqB;IACrE,sFAAsF;IAEtF,EAAE,UAAU,sDAAsD;QAChE,aACE;QACF,aAAa;IACf,GAAG,MAAM;IAET,MAAM,SAAS,EAAE;IACjB,UAAU,QAAQ,CAAC;QACjB,OAAO,KAAK;YAAC,IAAI,WAAW,CAAC,EAAE;YAAE,IAAI,WAAW,CAAC,EAAE;SAAC;QACpD,EAAE,OAAO;YAAC,IAAI,WAAW,CAAC,EAAE;YAAE,IAAI,WAAW,CAAC,EAAE;SAAC,EAC9C,MAAM,KACN,UAAU,CAAC,OAAO,EAAE,IAAI,IAAI,EAAE,EAAE,IAAI,YAAY,IAAI,CAAC,EAAE;YACtD,WAAW;QACb,GACC;IACL;IAEA,MAAM,SAAS,EAAE,aAAa,QAAQ,IAAI;IAC1C,IAAI,UAAU;IAEd,IAAI,gBAAgB;AACtB;;;AJpBA,MAAM,kCAAY,SAAS,cAAc;AACzC,MAAM,qCAAe,SAAS,cAAc;AAC5C,MAAM,yCAAmB,SAAS,cAAc;AAEhD,IAAI,iCACF,gCAAU,iBAAiB,UAAU,CAAC;IACpC,EAAE;IACF,MAAM,QAAQ,SAAS,eAAe,SAAS;IAC/C,MAAM,WAAW,SAAS,eAAe,YAAY;IACrD,CAAA,GAAA,yCAAI,EAAE,OAAO;AACf;AAGF,IAAI,oCACF,mCAAa,iBAAiB,UAAU,CAAC;IACvC,EAAE;IACF,MAAM,OAAO,SAAS,eAAe,QAAQ;IAC7C,MAAM,QAAQ,SAAS,eAAe,SAAS;IAC/C,CAAA,GAAA,yCAAa,EAAE;cAAE;eAAM;IAAM,GAAG;AAClC;AAGF,IAAI,wCACF,uCAAiB,iBAAiB,UAAU,CAAC;IAC3C,EAAE;IACF,MAAM,kBAAkB,SAAS,eAAe,oBAAoB;IACpE,MAAM,WAAW,SAAS,eAAe,YAAY;IACrD,MAAM,kBAAkB,SAAS,eAAe,oBAAoB;IACpE,CAAA,GAAA,yCAAa,EAAE;yBAAE;kBAAiB;yBAAU;IAAgB,GAAG;AACjE;AAGF,MAAM,kCAAY,SAAS,cAAc;AAEzC,IAAI,iCACF,gCAAU,iBAAiB,SAAS,CAAA,GAAA,yCAAK;AAG3C,MAAM,+BAAS,SAAS,eAAe;AAEvC,IAAI,8BAAQ;IACV,MAAM,YAAY,KAAK,MAAM,6BAAO,QAAQ;IAE5C,CAAA,GAAA,wCAAS,EAAE;AACb","sources":["public/js/index.js","public/js/login.js","public/js/alert.js","public/js/updateSettings.js","public/js/mapbox.js"],"sourcesContent":["import 'core-js/stable';\nimport 'regenerator-runtime/runtime';\n\nimport { login, logout } from './login.js';\nimport { updateSettings } from './updateSettings.js';\nimport displayMap from './mapbox.js';\n\nconst loginForm = document.querySelector('.form--login');\nconst userDataForm = document.querySelector('.form-user-data');\nconst userPasswordForm = document.querySelector('.form-user-password');\n\nif (loginForm) {\n  loginForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n}\n\nif (userDataForm) {\n  userDataForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const name = document.getElementById('name').value;\n    const email = document.getElementById('email').value;\n    updateSettings({ name, email }, 'data');\n  });\n}\n\nif (userPasswordForm) {\n  userPasswordForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    updateSettings({ passwordCurrent, password, passwordConfirm }, 'password');\n  });\n}\n\nconst logoutBtn = document.querySelector('.nav__el--logout');\n\nif (logoutBtn) {\n  logoutBtn.addEventListener('click', logout);\n}\n\nconst mapbox = document.getElementById('map');\n\nif (mapbox) {\n  const locations = JSON.parse(mapbox.dataset.locations);\n\n  displayMap(locations);\n}\n","import axios from 'axios';\r\nimport { showAlert } from './alert';\r\n\r\nexport async function login(email, password) {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: 'http://127.0.0.1:3000/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      // alert('Logged in successfully');\r\n      showAlert('success', 'Logged in successfully');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n    console.log(res);\r\n  } catch (err) {\r\n    // alert(err.response.data.message);\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n}\r\n\r\nexport async function logout() {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: 'http://127.0.0.1:3000/api/v1/users/logout',\r\n    });\r\n    if (res.data.status === 'success') location.reload(true);\r\n  } catch (err) {\r\n    showAlert('error', 'Error logging out! Try again.');\r\n  }\r\n}\r\n","export function showAlert(type, msg) {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  window.setTimeout(hideAlert, 5000);\n}\n\nexport function hideAlert() {\n  const el = document.querySelector('.alert');\n  if (el) el.parentElement.removeChild(el);\n}\n","import axios from 'axios';\nimport { showAlert } from './alert';\n\nexport async function updateSettings(data, type) {\n  try {\n    const url =\n      type === 'password'\n        ? 'http://127.0.0.1:3000/api/v1/users/updateMyPassword'\n        : 'http://127.0.0.1:3000/api/v1/users/me';\n    const res = await axios({\n      method: 'PATCH',\n      url,\n      data,\n    });\n    if (res.data.status === 'success') {\n      showAlert('success', `${type.toUpperCase()} updated successfully`);\n    }\n  } catch (err) {\n    console.log(err.response);\n    showAlert('error', err.response.data.message);\n  }\n}\n","\r\n\r\nexport default function (locations) {\r\n  var map = L.map('map', { zoomControl: false }); //to disable + - zoom\r\n  // var map = L.map('map', { zoomControl: false }).setView([31.111745, -118.113491], );\r\n\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution:\r\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n    crossOrigin: '',\r\n  }).addTo(map);\r\n\r\n  const points = [];\r\n  locations.forEach((loc) => {\r\n    points.push([loc.coordinates[1], loc.coordinates[0]]);\r\n    L.marker([loc.coordinates[1], loc.coordinates[0]])\r\n      .addTo(map)\r\n      .bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\r\n        autoClose: false,\r\n      })\r\n      .openPopup();\r\n  });\r\n\r\n  const bounds = L.latLngBounds(points).pad(0.5);\r\n  map.fitBounds(bounds);\r\n\r\n  map.scrollWheelZoom.disable();\r\n}\r\n\r\n\r\n\r\n"],"names":[],"version":3,"file":"app.js.map"}